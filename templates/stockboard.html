{% extends "base.html" %}

{% block content %}

{% if info is defined and result is defined %}

<div class="grid grid-flow-col grid-rows-2 grid-cols-3 gap-4" >
    <div style="border: 5pt solid black;  background-color: cornflowerblue;" >
        <div class="tradingview-widget-container" style="margin-left: 25pt;">
            <div id="tradingview_36b43"></div>
            
            <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
            <script type="text/javascript">
                new TradingView.MediumWidget(
                    {
                        "symbols": [
                            [
                                "{{ result }}|1D"
                            ]
                        ],
                        "chartOnly": false,
                        "width": "95%",
                        "height": "100%",
                        "locale": "en",
                        "colorTheme": "dark",
                        "gridLineColor": "#2a2e39",
                        "trendLineColor": "#1976d2",
                        "fontColor": "#787b86",
                        "underLineColor": "rgba(55, 166, 239, 0.15)",
                        "isTransparent": false,
                        "autosize": true,
                        "container_id": "tradingview_36b43"
                    }
                );
            </script>
        </div>
    </div>
    <div class="col-start-3" style="border: 5pt solid black; ">
        <ul class="list-none">

            {% for i in range(5) %}
                        
            <li><b>{{headlines[i]["title"]}}</b></li>
            <li>{{headlines[i]["source"]["name"]}}</li>
            <li>{{headlines[i]["content"]}}</li>
            <li><a href="{{headlines[i]["url"]}}" target="_blank">{{headlines[i]["url"]}}</a></li>

            <br>
            {% endfor %}
        </ul>
        

        
    </div>
    <div style="border: 5pt solid black; ">
        <div class='tableauPlaceholder' id='viz1617473771999' style='position: relative'>
			<noscript><a href='#'><img alt='Stock Heat Map ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;he&#47;heatmap_16174736517950&#47;Dashboard1&#47;1_rss.png' style='border: none' /></a></noscript>
			<object class='tableauViz'  style='display:none;'>
				<param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
				<param name='embed_code_version' value='3' /> 
				<param name='site_root' value='' />
				<param name='name' value='heatmap_16174736517950&#47;Dashboard1' />
				<param name='tabs' value='no' /><param name='toolbar' value='yes' />
				<param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;he&#47;heatmap_16174736517950&#47;Dashboard1&#47;1.png' />
				<param name='animate_transition' value='yes' />
				<param name='display_static_image' value='yes' />
				<param name='display_spinner' value='yes' />
				<param name='display_overlay' value='yes' />
				<param name='display_count' value='yes' />
				<param name='language' value='en' />
			</object>
		</div>                
		<script type='text/javascript'>                    
			var divElement = document.getElementById('viz1617473771999');                    
			var vizElement = divElement.getElementsByTagName('object')[0];                    
			if ( divElement.offsetWidth > 800 ) { 
					vizElement.style.minWidth='420px';vizElement.style.maxWidth='1330px';vizElement.style.width='100%';vizElement.style.minHeight='587px';vizElement.style.maxHeight='795px';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';
			} 
			else if ( divElement.offsetWidth > 500 ) {
				 vizElement.style.minWidth='420px';vizElement.style.maxWidth='1330px';
				 vizElement.style.width='100%';vizElement.style.minHeight='587px';
				 vizElement.style.maxHeight='795px';
				 vizElement.style.height=(divElement.offsetWidth*0.75)+'px';
			} 
			else { vizElement.style.width='100%';vizElement.style.height='727px';}                     
			var scriptElement = document.createElement('script');                    
			scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    
			vizElement.parentNode.insertBefore(scriptElement, vizElement);                
		</script>
    </div>
    <div style="border: 5pt solid black; ">
      4
    </div>
    <div class="row-start-1 col-start-2 col-span-2" style="border: 5pt solid black; ">
        <table style="width: 70%; margin-left: 225;">
            <th>
                Company Overview
            </th>
            <tr>
                <td>Industry:</td>
                <td>
                    {{info[12][1]}}
                </td>
            </tr>
    
            <tr>
                <td>About:</td>
                <td>
                    {{info[3][1]}}           
                </td>
            </tr>
    
            <tr>
    
                <td>Phone Number:</td>
                <td>
                    {{info[5][1]}}
                </td>
    
            </tr>
    
            <tr>
            
                <td>Website:</td>
                <td>
                    {{info[9][1]}}
                </td>
            
            </tr>
    
    </table>

    <table style="margin-left: 225px;">

        <th>
            Stock Information
        </th>

        <tr>
            <td>Previous Close:</td>
            <td>
                {{info[13][1]}}
            </td>

        </tr>

        <tr>
            <td>Regular Market Open:</td>
            <td>
                {{info[14][1]}}
                
            </td>
                
        </tr>

        <tr>
            <td>Dividend Rate:</td>
            <td>
                {{info[32][1]}}%
            </td>
        
        </tr>

        <tr>
            <td>Volume:</td>
            <td>
                {{info[54][1]}} shares
            </td>
        
        </tr>


    </table>


{% else %}
    <h1>Sorry! Could not find the stock that you were looking for.</h1>

{% endif %}
           
{% endblock %}

<!--{% for i,j in info %}
<tr>

    <td>
        {{info[2:5]}}
    </td>

    {% endfor %}-->